/* 
	*
	*
	jAlert v.3
	Made with love by Versatility Werks (http://flwebsites.biz)
	MIT Licensed
	*
	*
*/
;!function(t){var e={};Date.now||(Date.now=function(){return+new Date}),t.fn.jAlert=function(o){t("body").focus(),t("body").blur();var i=['default', 'green', 'dark_green', 'red', 'dark_red', 'black', 'brown', 'gray', 'dark_gray', 'blue', 'dark_blue', 'yellow'],n=["xsm","sm","md","lg","xlg","full","auto"],s=["white","black"],r=[],l=["animated"],a=[];if(this.length>1)return this.each(function(){t(this).jAlert(o)}),this;if(o=t.extend({},t.fn.jAlert.defaults,o),o.id)var c=o.id;else var d=Date.now().toString()+Math.floor(1e5*Math.random()),c="ja_"+d;if(e[c]={},thisAlert=e[c],thisAlert.options=o,thisAlert.options.id=c,thisAlert.instance=!1,"confirm"==thisAlert.options.type&&(thisAlert.options.content||(thisAlert.options.content=thisAlert.options.confirmQuestion),thisAlert.options.btns=[{text:thisAlert.options.confirmBtnText,theme:"green","class":"confirmBtn",closeAlert:!0,onClick:thisAlert.options.onConfirm},{text:thisAlert.options.denyBtnText,theme:"red","class":"denyBtn",closeAlert:!0,onClick:thisAlert.options.onDeny}],thisAlert.options.autofocus=thisAlert.options.confirmAutofocus),-1==t.inArray(thisAlert.options.theme,i))return console.log("jAlert Config Error: Invalid theme selection."),!1;if(l.push("ja_"+thisAlert.options.theme),thisAlert.options["class"]&&l.push(thisAlert.options["class"]),thisAlert.options.classes&&l.push(thisAlert.options.classes),thisAlert.options.title||l.push("ja_noTitle"),thisAlert.options.size&&("string"==typeof thisAlert.options.size&&-1==t.inArray(thisAlert.options.size,n)||"object"==typeof thisAlert.options.size&&("undefined"==typeof thisAlert.options.size.width||"undefined"==typeof thisAlert.options.size.height)))return console.log("jAlert Config Error: Invalid size selection (try a preset or make sure you're including height and width in your size object)."),!1;if(thisAlert.options.size?"object"==typeof thisAlert.options.size?(r.push("width: "+thisAlert.options.size.width+";"),r.push("height: "+thisAlert.options.size.height+";")):l.push("ja_"+thisAlert.options.size):l.push("ja_sm"),-1==t.inArray(thisAlert.options.backgroundColor,s))return console.log("jAlert Config Error: Invalid background color selection."),!1;a.push("ja_wrap_"+thisAlert.options.backgroundColor),thisAlert.options.onOpen=[thisAlert.options.onOpen];var h="onload='$.fn.jAlert.mediaLoaded($(this))'",p="<div class='ja_loader'>Loading...</div>";thisAlert.options.image?(thisAlert.options.content="<div class='ja_media_wrap'>"+p+"<img src='"+thisAlert.options.image+"' class='ja_img' "+h+"'",thisAlert.options.imageWidth&&(thisAlert.options.content+=" style='width: "+thisAlert.options.imageWidth+"'"),thisAlert.options.content+="></div>"):thisAlert.options.video?(thisAlert.options.content="<div class='ja_media_wrap'>"+p+"<div class='ja_video'></div></div>",thisAlert.options.onOpen.unshift(function(e){var o=document.createElement("iframe");o.src=thisAlert.options.video,o.addEventListener?o.addEventListener("load",function(){t.fn.jAlert.mediaLoaded(t(this))},!0):o.attachEvent?o.attachEvent("onload",function(){t.fn.jAlert.mediaLoaded(t(this))}):o.onload=function(){t.fn.jAlert.mediaLoaded(t(this))},e.find(".ja_video").append(o)})):thisAlert.options.iframe?(thisAlert.options.iframeHeight||(thisAlert.options.iframeHeight=.9*t(window).height()+"px"),thisAlert.options.content="<div class='ja_media_wrap'>"+p+"</div>",thisAlert.options.onOpen.unshift(function(e){var o=document.createElement("iframe");o.src=thisAlert.options.iframe,o.height=thisAlert.options.iframeHeight,o.className="ja_iframe",o.addEventListener?o.addEventListener("load",function(){t.fn.jAlert.mediaLoaded(t(this))},!0):o.attachEvent?o.attachEvent("onload",function(){t.fn.jAlert.mediaLoaded(t(this))}):o.onload=function(){t.fn.jAlert.mediaLoaded(t(this))},e.find(".ja_media_wrap").append(o)})):thisAlert.options.ajax&&(thisAlert.options.content="<div class='ja_media_wrap'>"+p+"</div>",onAjaxCallbacks=thisAlert.options.onOpen,thisAlert.options.onOpen=[function(e){t.ajax(thisAlert.options.ajax,{async:!0,complete:function(o,i){e.find(".ja_media_wrap").replaceWith(o.responseText),t.each(onAjaxCallbacks,function(t,o){o(e)})},error:function(t,o,i){thisAlert.options.onAjaxFail(e,"Error getting content: Code: "+t.status+" : Msg: "+t.statusText)}})}]),this.centerAlert=function(){var e=t(window).height(),o=thisAlert.instance.height(),i=e-o,n=i/2;n>200&&(n-=100),0>=n&&(n=0),thisAlert.instance.css("margin-top",n+"px"),t("body").css("overflow","hidden"),i>5?thisAlert.instance.parents(".ja_wrap").css("position","fixed"):(thisAlert.instance.parents(".ja_wrap").css("position","absolute"),t("html, body").animate({scrollTop:n-50},200))};var A=function(t,o){"hide"==t?o.removeClass(e[o.attr("id")].options.showAnimation).addClass(e[o.attr("id")].options.hideAnimation):(o.centerAlert(),o.addClass(e[o.attr("id")].options.showAnimation).removeClass(e[o.attr("id")].options.hideAnimation).show())},f=function(e){if("undefined"==typeof e.href&&(e.href=""),"undefined"==typeof e["class"]&&(e["class"]=""),"undefined"==typeof e.theme?e["class"]+=" ja_btn_default":e["class"]+=" ja_btn_"+e.theme,"undefined"==typeof e.text&&(e.text=""),"undefined"==typeof e.id){var o=Date.now().toString()+Math.floor(1e5*Math.random());e.id="ja_btn_"+o}return"undefined"==typeof e.target&&(e.target="_self"),"undefined"==typeof e.closeAlert&&(e.closeAlert=!0),t("body").on("click","#"+e.id,function(o){var i=t(this);e.closeAlert&&i.parents(".jAlert").closeAlert();var n=!0;return"function"==typeof e.onClick&&(n=e.onClick(o,i)),!n||e.closeAlert?(o.preventDefault(),!1):n}),"<a href='"+e.href+"' id='"+e.id+"' target='"+e.target+"' class='ja_btn "+e["class"]+"'>"+e.text+"</a> "};this.closeAlert=function(o,i){var n=t(this);return 0!=o&&(o=!0),n.length&&(n.unbind("DOMSubtreeModified"),A("hide",n),window.setTimeout(function(){var s=n.parents(".ja_wrap");o?s.remove():s.hide(),"function"==typeof i?i(n):"function"==typeof e[n.attr("id")].options.onClose&&e[n.attr("id")].options.onClose(n),t(".jAlert").length>0?t(".jAlert:last").centerAlert():t("body").css("overflow","auto")},e[n.attr("id")].options.animationTimeout)),this},this.showAlert=function(o,i,n,s){var r=t(this);0!=o&&(o=!0),i!==!1&&(i=!0),o&&t(".jAlert:visible").closeAlert(i);var l=r.parents(".ja_wrap");t("body").append(l),A("show",r),"function"==typeof s&&(e[r.attr("id")].options.onClose=s),window.setTimeout(function(){"function"==typeof n&&n(r)},e[r.attr("id")].options.animationTimeout)};var u=function(e){var o="";o+='<div class="ja_wrap '+a.join(" ")+'"><div class="jAlert '+l.join(" ")+'" style="'+r.join(" ")+'" id="'+thisAlert.options.id+'"><div>',thisAlert.options.closeBtn&&(o+="<div class='closejAlert ja_close",thisAlert.options.closeBtnAlt?o+=" ja_close_alt":thisAlert.options.closeBtnRound&&(o+=" ja_close_round"),o+="'>&times;</div>"),thisAlert.options.title&&(o+="<div class='ja_title'><div>"+thisAlert.options.title+"</div></div>"),o+='<div class="ja_body">'+e,thisAlert.options.btns&&(o+='<div class="ja_btn_wrap ',thisAlert.options.btnBackground&&(o+="optBack"),o+='">'),"object"==typeof thisAlert.options.btns[0]?t.each(thisAlert.options.btns,function(t,e){"object"==typeof e&&(o+=f(e))}):"object"==typeof thisAlert.options.btns?o+=f(thisAlert.options.btns):thisAlert.options.btns&&console.log("jAlert Config Error: Incorrect value for btns (must be object or array of objects): "+thisAlert.options.btns),thisAlert.options.btns&&(o+="</div>"),o+="</div></div></div></div>";var i=t(o);return thisAlert.options.replaceOtherAlerts&&t(".jAlert:visible").closeAlert(),t("body").append(i),thisAlert.instance=t("#"+thisAlert.options.id),A("show",thisAlert.instance),thisAlert.options.closeBtn&&thisAlert.instance.on("click",".closejAlert",function(e){return e.preventDefault(),t(this).parents(".jAlert").closeAlert(),!1}),thisAlert.options.closeOnClick&&(t(document).off("mouseup",t.fn.jAlert.onMouseUp),t(document).on("mouseup",t.fn.jAlert.onMouseUp)),thisAlert.options.closeOnEsc&&(t(document).off("keydown",t.fn.jAlert.onEscKeyDown),t(document).on("keydown",t.fn.jAlert.onEscKeyDown)),thisAlert.options.onOpen&&t.each(thisAlert.options.onOpen,function(t,e){e(thisAlert.instance)}),thisAlert.options.autofocus?thisAlert.instance.find(thisAlert.options.autofocus).focus():thisAlert.instance.focus(),thisAlert.instance.bind("DOMSubtreeModified",function(){thisAlert.instance.centerAlert()}),thisAlert.instance};return this.initialize=function(){return thisAlert.options.content||thisAlert.options.image||thisAlert.options.video||thisAlert.options.iframe||thisAlert.options.ajax?(thisAlert.options.content||(thisAlert.options.content=""),u(thisAlert.options.content)):(console.log("jAlert potential error: No content defined"),u(""))},this.initialize(),this},t.fn.jAlert.defaults={title:!1,content:!1,image:!1,imageWidth:"auto",video:!1,ajax:!1,onAjaxFail:function(t,e){thisAlert.closeAlert(),errorAlert(e)},iframe:!1,iframeHeight:!1,"class":"",classes:"",id:!1,showAnimation:"fadeInUp",hideAnimation:"fadeOutDown",animationTimeout:600,theme:"default",backgroundColor:"black",size:!1,replaceOtherAlerts:!1,closeOnClick:!1,closeOnEsc:!0,closeBtn:!0,closeBtnAlt:!1,closeBtnRound:!0,btns:!1,btnBackground:!0,autofocus:!1,onOpen:function(t){return!1},onClose:function(t){return!1},type:"modal",confirmQuestion:"Are you sure?",confirmBtnText:"Yes",denyBtnText:"No",confirmAutofocus:".confirmBtn",onConfirm:function(t,e){return t.preventDefault(),console.log("confirmed"),!1},onDeny:function(t,e){return t.preventDefault(),!1}},t.fn.jAlert.onMouseUp=function(o){var i=o.target?o.target:o.srcElement,n=t(".jAlert:visible:last");e[n.attr("id")].options.closeOnClick&&(t(i).is(".jAlert *")||n.closeAlert())},t.fn.jAlert.onEscKeyDown=function(o){if(27===o.keyCode){var i=t(".jAlert:visible:last");e[i.attr("id")].options.closeOnEsc&&i.closeAlert()}},t.jAlert=function(e){return t.fn.jAlert(e)},t.fn.alertOnClick=function(e){t(this).on("click",function(o){return o.preventDefault(),t.jAlert(e),!1})},t.alertOnClick=function(e,o){t("body").on("click",e,function(e){return e.preventDefault(),t.jAlert(o),!1})};var o;t(window).resize(function(){window.clearTimeout(o),o=window.setTimeout(function(){t(".jAlert:visible").each(function(){t(this).centerAlert()})},200)}),t.fn.jAlert.mediaLoaded=function(t){var e=t.parents(".ja_media_wrap"),o=e.find(".ja_video");e.find(".ja_loader").remove(),o.length>0?o.fadeIn("fast"):t.fadeIn("fast"),t.parents(".jAlert").centerAlert()}}(jQuery);
